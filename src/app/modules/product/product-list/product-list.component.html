<app-template>
  <div class="product-list">
    <div class="panel-container">
      <div class="header-container">
        <span class="title">Produtos</span>
        <p-fieldset legend="Pesquisa">
          <div class="grid">
            <div class="col-3">
              <div class="dropdown-container">
                <div class="col-12">
                  <label>Categoria</label>
                </div>
                <p-dropdown
                  [(ngModel)]="category"
                  [options]="categories"
                  optionLabel="name"
                  placeholder="Selecione"></p-dropdown>
              </div>
            </div>
            <div class="col-6">
              <div class="col-12">
                <label>Nome</label>
              </div>
              <input
                [(ngModel)]="name"
                class="input"
                pInputText
                type="text"/>
            </div>
            <div class="col-3">
              <div class="dropdown-container">
                <div class="col-12">
                  <label>Situação</label>
                </div>
                <p-dropdown
                  [(ngModel)]="status"
                  [options]="statusOptions"
                  optionLabel="label"
                  optionValue="value"
                  placeholder="Selecione"></p-dropdown>
              </div>
            </div>
          </div>
          <div class="button-container">
            <p-button
              (click)="loadData()"
              icon="pi pi-search"
              iconPos="left"
              label="Pesquisar"
              styleClass="button"
            ></p-button>
            <p-button
              (click)="limpar()"
              icon="pi pi-refresh"
              iconPos="left"
              label="Limpar"
              styleClass="button"
            ></p-button>
          </div>
        </p-fieldset>
      </div>
      <div class="table-panel">
        <div class="title-two">
          <span>Lista de Produtos</span>
        </div>
        <div>
          <p-button (onClick)="clickAdicionar()" icon="pi pi-plus" iconPos="left" label="Adicionar"
                    styleClass="add-button"></p-button>
        </div>
      </div>
      <p-table
        [paginator]="true"
        [rows]="10"
        [value]="products"
        class="table-list"
        dataKey="id" styleClass="p-datatable-gridlines">
        <ng-template pTemplate="header">
          <tr style="text-align: center">
            <th style="width: 10%; text-align: center">#</th>
            <th>Nome</th>
            <th style="width: 10%; text-align: center">Categoria</th>
            <th style="width: 10%; text-align: center">Situação</th>
            <th style="width: 10%; text-align: center">Ações</th>
          </tr>
        </ng-template>
        <ng-template let-product let-ri="rowIndex" pTemplate="body">
          <tr>
            <td style="text-align: center">{{ ri + 1 }}</td>
            <td>{{ product.name }}</td>
            <td style="text-align: center">{{ product.category }}</td>
            <td style="text-align: center">{{ getStatusLabel(product.status) }}</td>
            <td style="text-align: center">
              <p-button (onClick)="clickEditar(product.id)" class="button-item"
                        icon="pi pi-pencil"></p-button>
              <p-button (onClick)="clickExcluir($event, product.id)" class="button-item"
                        icon="pi pi-trash"></p-button>
            </td>
          </tr>
        </ng-template>
      </p-table>
    </div>
  </div>
</app-template>
