<app-template>
  <div class="person-list">
    <div class="panel-container">
      <div class="header-container">
        <span class="title">Consulta Cliente</span>
        <p-fieldset legend="Pesquisa">
          <div class="search-panel">
            <div class="search-container">
              <div class="dropdown-container">
                <label>Tipo</label>
                <p-dropdown
                  [(ngModel)]="type"
                  [options]="tipo"
                  optionLabel="label"
                  optionValue="value"
                  placeholder="Selecione"
                ></p-dropdown>
              </div>
              <div class="input-container">
                <label>Nome</label>
                <input
                  [(ngModel)]="nome"
                  class="input"
                  pInputText
                  type="text"
                />
              </div>
              <div class="dropdown-container">
                <label>Situação</label>
                <p-dropdown
                  [(ngModel)]="status"
                  [options]="situacoes"
                  optionLabel="label"
                  optionValue="value"
                  placeholder="Selecione"
                ></p-dropdown>
              </div>
            </div>
            <div class="button-container">
              <p-button
                (click)="loadData()"
                icon="pi pi-search"
                iconPos="left"
                label="Pesquisar"
                styleClass="button"
              ></p-button>
              <p-button
                (click)="limpar()"
                icon="pi pi-refresh"
                iconPos="left"
                label="Limpar"
                styleClass="button"
              ></p-button>
            </div>
          </div>
        </p-fieldset>
      </div>
      <div class="table-panel">
        <div class="title-two">
          <span>Lista de Clientes</span>
        </div>
        <p-button
          (onClick)="clickAdicionar()"
          icon="pi pi-plus"
          iconPos="left"
          label="Adicionar"
          styleClass="add-button"
        ></p-button>
      </div>
      <p-table
        [paginator]="true"
        [rows]="10"
        [value]="persons"
        class="table-list"
        dataKey="id" styleClass="p-datatable-gridlines"
      >
        <ng-template pTemplate="header">
          <tr style="text-align: center">
            <th style="width: 5%; text-align: center">#</th>
            <th>Nome</th>
            <th style="width: 10%; text-align: center">CPF/CNPJ</th>
            <th style="width: 5%; text-align: center">Situação</th>
            <th style="width: 10%; text-align: center">Ações</th>
          </tr>
        </ng-template>
        <ng-template let-person let-ri="rowIndex" pTemplate="body">
          <tr>
            <td style="text-align: center">{{ri + 1}}</td>
            <td>{{ person.name }}</td>
            <td style="text-align: center">{{person.document}} </td>
            <td style="text-align: center">{{ getStatus(person) }}</td>
            <td style="text-align: center">
              <p-button
                (onClick)="clickEditar(person.id)" class="button-item" icon="pi pi-pencil"
              ></p-button>
              <p-button
                (onClick)="clickExcluir($event, person.id)" class="button-item" icon="pi pi-trash"
              ></p-button>
            </td>
          </tr>
        </ng-template>
      </p-table>
    </div>
  </div>
</app-template>
